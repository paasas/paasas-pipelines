project: control-plane-377914
region: northamerica-northeast1
apps:
- name: demo-webapp
  image: gcr.io/cloudrun/container/hello
  tag: latest
  registryType: GCR
  serviceAccount: cloud-run@control-plane-377914.iam.gserviceaccount.com
  env:
    MY_ENV_VAR: env-variable
  secretEnv:
    DOCUMENTAPI_CLIENT_ID: DOCUMENTAPI_CLIENT_ID
    DOCUMENTAPI_CLIENT_SECRET: LOOKERSDK_BASE_URL
    LOOKERSDK_CLIENT_ID: LOOKERSDK_CLIENT_ID
    LOOKERSDK_CLIENT_SECRET: LOOKERSDK_CLIENT_SECRET
    LOOKERSDK_EMBED_HOST: LOOKERSDK_EMBED_HOST
    LOOKERSDK_EMBED_SECRET: LOOKERSDK_EMBED_SECRET
  port: 8080
  resources:
    limits:
      cpu: 1000m
      memory: 512Mi
  startupProbe:
    timeoutSeconds: 240
    periodSeconds: 240
    failureThreshold: 1
    tcpSocket:
      port: 8080
  tests:
    uri: git@github.com:teleport-java-client/my-cloud-run-tests.git
    path: cloud-run-tests
    # branch: firebase-app-tests
    tag: my-cloud-run-tests-tag
composer:
- name: composer-1
  bucketName: composer-1-bucket
  bucketPath: dags
  location: us-east1
  dags:
    git:
      branch: dags-branch
      uri: git@github.com:teleport-java-client/paas-moe-le-cloud.git
      path: dags-path
    flexTemplates:
    - gcsPath: flex-templates/iawealth-api-to-gcs-ingestion/v1.0.0/dataflow-ingestion.json
      image: gcr.io/prj-iapw-cicd-c-cicd-vld4/dataflow/iawealth-api-to-gcs-ingestion:v1.0.0
      metadataFile: cloud-composer/dags/raw/df-docker-metadata/api-to-gcs-ingestion/metadata.json
      
    - gcsPath: flex-templates/iawealth-gcs-to-bq-cob/v1.0.0/dataflow-ingestion.json
      image: gcr.io/prj-iapw-cicd-c-cicd-vld4/dataflow/iawealth-gcs-to-bq-cob:v1.0.0
      metadataFile: cloud-composer/dags/raw/df-docker-metadata/gcs-to-bq-cob/metadata.json
      
    - gcsPath: flex-templates/iawealth-gcs-to-bq-csv-ingestion/v1.0.0/dataflow-ingestion.json
      image: gcr.io/prj-iapw-cicd-c-cicd-vld4/dataflow/iawealth-gcs-to-bq-csv-ingestion:v1.0.0
      metadataFile: cloud-composer/dags/raw/df-docker-metadata/gcs-to-bq-csv-ingestion/metadata.json
      
    - gcsPath: flex-templates/iawealth-gcs-to-bq-json-ingestion/v1.0.0/dataflow-ingestion.json
      image: gcr.io/prj-iapw-cicd-c-cicd-vld4/dataflow/iawealth-gcs-to-bq-json-ingestion:v1.0.0
      metadataFile: cloud-composer/dags/raw/df-docker-metadata/gcs-to-bq-json-ingestion/metadata.json
      
    - gcsPath: flex-templates/iawealth-gcs-to-bq-mdm/v1.0.0/dataflow-ingestion.json
      image: gcr.io/prj-iapw-cicd-c-cicd-vld4/dataflow/iawealth-gcs-to-bq-mdm:v1.0.0
      metadataFile: cloud-composer/dags/raw/df-docker-metadata/gcs-to-bq-mdm/metadata.json
    
firebaseApp:
  config: |
    {
      "hosting": {
        "headers": [{
          "source": "*",
          "headers": [{
            "key": "Access-Control-Allow-Origin",
            "value": "*"
          }]
        }]
      }
    }
  git:
    uri: git@github.com:teleport-java-client/paas-moe-le-cloud.git
    path: firebase-app
    # branch: firebase-app
    tag: my-tag
  npm:
    command: env-cmd -f .env npm run build
    installArgs: --legacy-peer-deps
    env: |
      my-test-env: my-test-value
  tests:
    uri: git@github.com:teleport-java-client/my-tests.git
    path: firebase-app-tests
    # branch: firebase-app-tests
    tag: my-test-tag
terraform:
- name: dataset-1
  git:
    uri: git@github.com:teleport-java-client/paas-moe-le-cloud.git
    branch: my-branch
    tag: v0.10.0
    path: dataset-1
- name: dataset-2
  git:
    uri: git@github.com:teleport-java-client/paas-moe-le-cloud.git
    branch: my-branch
    path: dataset-2